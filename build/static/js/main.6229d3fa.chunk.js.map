{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/personService.js","components/Notification.js","App.js","index.js"],"names":["Filter","nameFilter","handleFilterChange","onInput","type","onChange","Person","name","number","clickToDelete","onClick","Persons","filterPerson","handleDelete","map","value","id","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","baseUrl","axios","delete","then","response","data","get","newObject","post","put","Notification","message","changeClass","className","App","useState","persons","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","getClass","setGetClass","useEffect","console","log","personService","filter","person","toLowerCase","indexOf","event","target","preventDefault","nameObject","some","find","p","changeNumber","window","confirm","setTimeout","catch","error","concat","personToDel","notDelPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6229d3fa.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({ nameFilter, handleFilterChange }) => {\n  return (\n    <div>\n      filter shown with<input onInput={() => nameFilter} type=\"text\" onChange={handleFilterChange}/>\n    </div>\n  );\n};\n\nexport default Filter;","import React from 'react';\n\nconst Person = ({ name, number, clickToDelete }) => {\n  return (\n          <div>\n            {name} {number} <button onClick={clickToDelete}>delete</button>\n          </div>\n  )\n};\n\nconst Persons = ({ filterPerson, handleDelete }) => {\n  return filterPerson.map(value => <Person key={value.name} name={value.name} number={value.number} clickToDelete={() => {handleDelete(value.id)}}/>)\n}\n\nexport default Persons;","import React from 'react';\n\nconst PersonForm = ({ addName, newName, handleNameChange, newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addName}>\n        <div>\n          name: <input type=\"text\" value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>number: <input type=\"text\" value={newNumber} onChange={handleNumberChange}/></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  );\n};\n\nexport default PersonForm;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { \n  deletePerson, getAll, create, update\n}","import React from 'react'\n\nconst Notification = ({message, changeClass}) => {\n  if (message === null) return null\n  return (\n    <div className={changeClass}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport personService from './services/personService';\nimport Notification from './components/Notification';\nimport './index.css'\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ getClass, setGetClass ] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService.getAll()\n        .then(response => {\n          setPersons(response)\n        })\n  }, [])\n\n  const addName = event => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const nameExist = persons.some(person => person.name.toLowerCase() === newName.toLowerCase());\n    if (nameExist) {\n      const person = persons.find(p => p.name === newName)\n      const changeNumber = {...person, number: newNumber}\n      const {id} = person\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.update(id, changeNumber)\n        .then(response => \n          setPersons(persons.map(person => \n            person.id !== id ? person : response)),\n            setErrorMessage(`${newName}'s number updated`),\n            setGetClass('completed'),\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000))\n            .catch(error => {\n              setGetClass('error')\n              setErrorMessage(`Information for ${newName} has already been removed from server`)\n              setPersons(persons.filter(person => \n                person.id !== id))\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000);\n            })\n      }\n      setNewName('')\n      setNewNumber('')\n    } else {\n      personService.create(nameObject)\n      .then(response => {\n        setPersons(persons.concat(response))\n        setGetClass('completed')\n        setErrorMessage(`Added ${newName}`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        setGetClass('error')\n        setErrorMessage(error.response.data.error);\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  const nameFilter =  persons.filter(person =>\n                      person.name\n                      .toLowerCase()\n                      .indexOf(newFilter) !== -1);\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  const handleDelete = id => {\n    const personToDel = persons.find(p => p.id === id)\n    const confirmDel = window.confirm(`Delete ${personToDel.name}?`)\n    if (confirmDel) {\n      personService.deletePerson(id).then(() => {\n        const notDelPerson = persons.filter(value => value.id !== id)\n        setPersons(notDelPerson)\n        setGetClass('completed')\n        setErrorMessage(`${personToDel.name} was deleted`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000);\n      })\n      .catch(error => {\n        setGetClass('error')\n        setErrorMessage(`Information for ${personToDel.name} has already been removed from server`)\n        const notDelPerson = persons.filter(value => value.id !== id)\n        setPersons(notDelPerson)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n        <Notification message={errorMessage} changeClass={getClass}/>\n        <Filter nameFilter={nameFilter} handleFilterChange={handleFilterChange} />\n      <h3>Add a new</h3>\n        <PersonForm addName={addName} newName={newName} handleNameChange={handleNameChange}\n          newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n        <Persons filterPerson={nameFilter} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}